<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-05-26">

<title>TLEF-AI and COMET Style Guide</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="style_guide_files/libs/clipboard/clipboard.min.js"></script>
<script src="style_guide_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="style_guide_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="style_guide_files/libs/quarto-html/popper.min.js"></script>
<script src="style_guide_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="style_guide_files/libs/quarto-html/anchor.min.js"></script>
<link href="style_guide_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="style_guide_files/libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="style_guide_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="style_guide_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="style_guide_files/libs/bootstrap/bootstrap-81267100e462c21b3d6c0d5bf76a3417.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">TLEF-AI and COMET Style Guide</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 26, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>In order to maintain a consistent format and structure across authors and courses, we ask that all contributors adhere to the following style guide, unless there is a compelling reason not to do so.</p>
<section id="look-and-feel" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Look and Feel</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="media/comet_style_guide.png" class="img-fluid figure-img"></p>
<figcaption>Style Guide for COMET Notebooks</figcaption>
</figure>
</div>
</section>
<section id="directory-structure" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Directory Structure</h1>
<p>It is very important that you use a consistent directory structure and naming convention for each module and its associated files, especially when uploading to the Git repository. Your repo should look like:</p>
<pre><code>&gt; main_repo
  |- level (directory)
     |- datasets_level
     |- level_title_of_notebook
        |- level_title_of_notebook.qmd
        |- level_title_of_notebook_tests.r
        |- level_title_of_notebook_functions.r
        |- ...
        |- .gitignore (if not at higher level)</code></pre>
<p>It is also important that you keep file names consistent across modules—lowercase titles with spaces represented by underscores. Ensure that the calls to datasets and test files follow the proper paths within the notebooks.</p>
<ul>
<li>You should also ensure that <code>.ipynb checkpoints</code> and other ancillary files are <em>not</em> synched to the main repo. These commits will be rejected or only adopted piecemeal.</li>
<li>Bespoke (i.e.&nbsp;only used in one module) data should be stored in a <code>data</code> folder. If it’s used more than once, add it to the main datasets folder
<ul>
<li>Try to avoid this without a good reason; instead, parse existing data or generate it using a helper function from the <code>tests</code> library for the module.</li>
</ul></li>
</ul>
</section>
<section id="notebook-template" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Notebook Template</h1>
<p>You can use the following template as a reference point for the layout of a well-structured notebook. Do not edit this template without checking first! All notebooks <em>must</em> include:</p>
<ul>
<li>A title, potentially including the course and module number</li>
<li>A list of authors</li>
<li>Date of last update</li>
<li>A list of learning objectives</li>
<li>A references section</li>
</ul>
<p>Items such as learning objectives, prerequisites and outcomes may be included within the outline section. References may be included in the outline or towards the end of the notebook subject to author’s discretion.</p>
<section id="title-format" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="title-format"><span class="header-section-number">3.1</span> Title Format</h2>
<section id="comet-title-formats" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="comet-title-formats"><span class="header-section-number">3.1.1</span> COMET Title Formats</h3>
<p>Titles should look like this: X.X.X - Level - Notebook Title (applicable course code)</p>
<p>The number at the front of the notebook depends on the course level and follows this hierarchy: - 0.X.X for Getting Started - 1.X.X for Beginner - 2.X.X for Intermediate - 3.X.X for Advanced</p>
<p>Example: 2.2 - Intermediate - Multiple Regression</p>
<p>If you are adding a new notebook make sure to adjust the numbers of the other notebooks to follow the decided upon progression. If replacing a notebook, ensure the number matches what is being replaced. The third number in the system is meant for notebooks that cover the same topic (ex: 1.5.1 - Beginner - Introduction to Data Visualization I and 1.5.2 - Beginner - Introduction to Data Visualization II).</p>
<p>Note: Projects do not get an identifying code at the front and start with the level, Projects.</p>
<p>Note: The applicable course code is only for notebooks with the same/similar titles, often from different courses and can therefore be identified by the course code.</p>
</section>
</section>
<section id="headers-for-.qmd-notebooks" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="headers-for-.qmd-notebooks"><span class="header-section-number">3.2</span> Headers for <code>.qmd</code> notebooks</h2>
<p>The top-section for all <code>.qmd</code> notebooks should be as follows:</p>
<pre><code>---
title: "X.X.X - Level - Notebook Title"
author: Team Name &lt;br&gt; _Names_
date: YYYY-MM-DD
version: XX.XX
description: A short 1 paragraph intro to the unit.
categories: [tags, with, commas]
format: 
  html: default
  ipynb:
    jupyter:
      kernelspec:
        display_name: R
        language: r
        name: ir
---</code></pre>
<p>The <code>kernelspec</code> in the last part should agree with the intended kernel for the Jupyter notebooks</p>
</section>
<section id="categories-notebook-tags" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="categories-notebook-tags"><span class="header-section-number">3.3</span> Categories (Notebook Tags)</h2>
<p>Tags should always include the programming language, what category they come from (beginner, intermediate, etc.), and what class they belong to (226, 325, etc.). Aim for 10-15 tags depending on the content of the notebook. Tags should not be capitalized unless the tag is a proper noun (ex: Frisch-Waugh-Lovell theorem) and should stay the same across notebooks (ex: regression should always be tagged as “regression” and not “regressions”) to remain consistent across notebooks.</p>
</section>
<section id="headers-for-.ipynb-notebooks" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="headers-for-.ipynb-notebooks"><span class="header-section-number">3.4</span> Headers for <code>.ipynb</code> notebooks</h2>
<p>The top-section for all <code>.ipynb</code> notebooks should be as follows:</p>
<pre><code># Title of Notebook
* **Authors**: Team Name (List of authors (no emails))
* **Last Update**: Date 

## Outline
...</code></pre>
</section>
</section>
<section id="general-notebook-formatting" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> General Notebook Formatting</h1>
<p>Notebooks are written using the <em>Markdown</em> language, which supports a wide variety of text, including arbitrary HTML. To ensure as much backwards compatibility as possible, <strong><em>avoid using HTML elements whenever possible</em></strong>; use Markdown instead.</p>
<p>You can find a list of the different possible commands for Markdown here:</p>
<ul>
<li>The <a href="https://www.markdownguide.org/basic-syntax/">basic syntax</a> which is completely supported by Jupyter.</li>
<li>The <a href="https://quarto.org/docs/authoring/markdown-basics.html">extended syntax</a> for <code>.qmd</code> notebooks only.</li>
<li>The <a href="https://www.markdownguide.org/cheat-sheet/">cheat sheet</a> is a good reference point</li>
</ul>
<p>You should familiarize yourself with these, and the best practices outlined on these pages.</p>
<section id="formatting-guidelines" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="formatting-guidelines"><span class="header-section-number">4.1</span> Formatting Guidelines</h2>
<ul>
<li>Use only <strong>one</strong> top-level heading (<code>#</code>); all other headings <strong><em>must</em></strong> be (<code>##</code>) or below.
<ul>
<li>Sequential increase in heading levels is encouraged but not essential.</li>
</ul></li>
<li><strong>Never</strong> use transitions (<code>---</code> or <code>\__\_</code>)</li>
<li>When referring to variables or code elements, use <code>typewriter font</code></li>
<li>When introducing a new definition or object use <strong>bold</strong> which should be declared using two asterisks</li>
<li>When referring to packages, models, or frameworks, using <em>italics</em> which should be declared using underscores.</li>
<li>You can use italics for emphasis, but only <em>when necessary</em>. Be sparing.
<ul>
<li>We <em>never</em> use bold for emphasis. For critically important information, use <strong><em>bold italics</em></strong> which should be declared using three asterisks.</li>
</ul></li>
<li>Use blockquotes (<code>&gt;</code>) when using asides, comments, notes, or parenthetical remarks.</li>
<li>Use spaces, not tabs, to indent; 4 spaces = 1 tab</li>
<li>All links must have descriptive link text:
<ul>
<li>Good: find it on <a href="https://canvas.ubc.ca/">UBC’s Canvas Homepage</a></li>
<li>Bad: find it <a href="https://canvas.ubc.ca/">here</a></li>
</ul></li>
<li>Links should also not include spaces in the URL (use <code>%20</code> instead of a space)</li>
<li>When using display mode math <code>$$</code>, place these marks on separate lines and code on its own line within. i.e.&nbsp;don’t do <code>$$ x $$</code>, do</li>
</ul>
<pre><code>$$ 
x 
$$</code></pre>
<ul>
<li>Make sure bulleted lists have a blank line before and after them:</li>
</ul>
<pre><code>Some text here:

* A list item
* Another one

Some more text</code></pre>
<section id="vernacular" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="vernacular"><span class="header-section-number">4.1.1</span> Vernacular</h3>
<ul>
<li>Text should make use of the friendly and collegial “we”/“let’s”/“us” as the base case when describing a concept or process in a notebook. Here are some examples:
<ul>
<li>“It can be helpful for <strong>us</strong> to understand this concept as it relates to …”</li>
<li>“<strong>Let’s</strong> load the appropriate packages in now”</li>
<li>“Right now, <strong>we</strong> can’t tell how accurate our model is”</li>
</ul></li>
<li>“You” or “your” should be used when making an explicit directive to the learner. Here are some examples:
<ul>
<li>“Now it’s <strong>your</strong> turn to fill in the blank code below to see how this function works”</li>
<li>“<strong>You</strong> can check out this helpful resource (link) if <strong>you’re</strong> interested in learning more about this topic”</li>
</ul></li>
</ul>
</section>
<section id="images" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="images"><span class="header-section-number">4.1.2</span> Images</h3>
<p>Images are a high-risk, high-reward inclusion.</p>
<ul>
<li>All images <strong><em>must include alt text</em></strong> for accessibility</li>
<li>Alt text should be concise, descriptive, and specific, following best practices. A common rule-of-thumb is that it should be roughly how you would describe the image over the phone on a collect call.
<ul>
<li>You can find some examples on <a href="https://accessibility.psu.edu/images/alttext/">PSU’s Accessibility Website</a></li>
</ul></li>
<li>Try to use vector-based images, when possible. In order of preference:
<ol type="1">
<li>Vector images (e.g.&nbsp;<code>.svg</code>)</li>
<li>PNG format</li>
<li>JPG format</li>
</ol></li>
<li>In general, choose the lowest compression possible, and highest resolution, up to a reasonable file size.</li>
<li><strong><em>Make sure images meet copyright requirements</em></strong> and retain original sources as a reference or caption.</li>
<li>Avoid transparent backgrounds when possible; they render unexpectedly on different systems</li>
<li>Avoid spaces in file names</li>
<li>Images should always be collected in a module specific images folder; pay close attention to the directory pathway used.</li>
</ul>
</section>
<section id="lists" class="level3" data-number="4.1.3">
<h3 data-number="4.1.3" class="anchored" data-anchor-id="lists"><span class="header-section-number">4.1.3</span> Lists</h3>
<p>When rendering lists, pay close attention to indentation.</p>
<ul>
<li>When using an unordered list, use different list element identifiers for different levels. For example, use <code>-</code> for level 1, and <code>+</code> for level 2.</li>
<li>When using an ordered list, keep the list element indices in order (e.g.&nbsp;1., 2., 3. not 1., 1., 1.) even though they may render the same.</li>
<li>Remember the 4 spaces rule for indentation</li>
</ul>
</section>
<section id="references" class="level3" data-number="4.1.4">
<h3 data-number="4.1.4" class="anchored" data-anchor-id="references"><span class="header-section-number">4.1.4</span> References</h3>
<p>You can use references in Markdown. These should be used sparely; we prefer parenthetical remarks.</p>
<ul>
<li>Ensure that it is obvious where the reference will take you; they will render as URLs.</li>
</ul>
</section>
<section id="the-forbidden-zone" class="level3" data-number="4.1.5">
<h3 data-number="4.1.5" class="anchored" data-anchor-id="the-forbidden-zone"><span class="header-section-number">4.1.5</span> The Forbidden Zone</h3>
<ul>
<li>Do <strong><em>not</em></strong> use <code>)</code> as a delimiter.</li>
<li>Do <strong><em>not</em></strong> use <code>&lt;</code> and <code>&gt;</code> to create links.</li>
<li>Do <strong><em>not</em></strong> use spaces in image, link, or other names</li>
<li>Do <strong><em>not</em></strong> use <code>---</code> (horizontal rule) in the text; it will render in the <code>.ipynb</code> format, but it breaks the formatting of other output tools.</li>
</ul>
</section>
</section>
</section>
<section id="r-code-formatting" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> R Code Formatting</h1>
<p>The most important rule of all coding in this project is to <em>make it easy to understand</em>.</p>
<section id="self-tests" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="self-tests"><span class="header-section-number">5.1</span> Self Tests</h2>
<p>Notebooks should generally include self-testing elements, when possible. You can find information in our <a href="https://comet.arts.ubc.ca/pages/documentation/writing_self_tests.html">guide for writing self tests</a>.</p>
</section>
<section id="packages" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="packages"><span class="header-section-number">5.2</span> Packages</h2>
<p>We try to use as few packages as possible.</p>
<ul>
<li>If you need a new package added, create an issue and tag a maintainer</li>
<li>If you only need certain functionality, see if you can include (MIT licensed) code excerpts instead; be careful about licensing, though.</li>
</ul>
</section>
<section id="comments" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="comments"><span class="header-section-number">5.3</span> Comments</h2>
<p>Use comments frequently, especially the first time something is used.</p>
<ul>
<li>A rule of thumb is that comments shouldn’t be longer than a sentence</li>
<li>If you need large, multi-line comments, you likely should break the code block and use the commentary in markdown instead</li>
<li>Every code block longer than 2 lines should probably include a comment</li>
</ul>
</section>
<section id="r-code-assignment-functions-and-operators" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="r-code-assignment-functions-and-operators"><span class="header-section-number">5.4</span> R Code: Assignment, Functions, and Operators</h2>
<p>We organize assignment operators based on role; this is not <em>purely</em> stylistic but should not be an issue:</p>
<ul>
<li>We use <code>&lt;-</code> in code blocks</li>
<li>We use <code>=</code> inside functions</li>
</ul>
<p><em>Example:</em></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>output_1 <span class="ot">&lt;-</span> <span class="fu">my_function</span>(variables, <span class="at">color =</span> red)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>When we use options in functions, we always try to expand and align them for readability.</p>
<p><em>Example:</em></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>bad_example <span class="ot">&lt;-</span> <span class="fu">my_function</span>(variable_1, <span class="at">option_1 =</span> red, <span class="at">option_2 =</span> <span class="fu">max</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">option_3 =</span> <span class="st">"blue"</span>) </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#don't do this</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>good_example <span class="ot">&lt;-</span> <span class="fu">myfunction</span>(variable_1,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>                            <span class="at">option_1 =</span> red,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>                            <span class="at">option_2 =</span> <span class="fu">max</span>(<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>                            <span class="at">option_3 =</span> <span class="st">"blue"</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>                           )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We also try to explicitly name options, even when they can be passed by order, <em>except</em> when using pipes (%&gt;%)</p>
</section>
<section id="variable-and-function-naming" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="variable-and-function-naming"><span class="header-section-number">5.5</span> Variable and Function Naming</h2>
<ul>
<li>We always use <code>snake_case</code> for variable names, functions, etc.</li>
<li>We try to use variable names which are no longer than three words, and are descriptive of the object in question</li>
<li>We prefer to use more variables than fewer; description is better than parsimony
<ul>
<li>However, we try to use no more than necessary</li>
</ul></li>
</ul>
<p><em>Example:</em></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A Good Example</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>a_variable <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>another_variable <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>one_plus_one <span class="ot">&lt;-</span> a_variable <span class="sc">+</span> another_variable</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(one_plus_one)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># A Bad Example</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co"># same output but hard to read</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x <span class="sc">+</span> x</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="r-piping" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="r-piping"><span class="header-section-number">5.6</span> R: Piping</h2>
<p>Using pipes (<code>%&gt;%</code>) is controversial in R programming. We recommend using pipes when using <code>tidyverse packages</code>. Otherwise, we try to avoid them since they don’t always work. A general rule of thumb is that pipes should be used if (and only if) they improve code readability.</p>
</section>
</section>
<section id="math-style-guide" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Math Style Guide</h1>
<p>Jupyter uses <a href="https://docs.mathjax.org/en/latest/#">MathJax</a> to render math equations. This means that if you know how to write in LaTeX, you know how to write in Jupyter. It’s fairly straightforward.</p>
<ul>
<li><a href="https://jupyterbook.org/content/math.html">This guide</a> provides a simple introduction to how math can be used</li>
<li>You can find the <a href="https://docs.mathjax.org/en/latest/input/tex/macros/index.html">list of supported commands (and symbol)</a></li>
</ul>
<p><strong>Important</strong>: when using display math mode ($$) make sure that you “fence” the math. For example:</p>
<ul>
<li><em>Bad</em>: <span class="math display">\[x = 1\]</span></li>
<li><em>Good</em>:</li>
</ul>
<pre><code>     $$
     x = 1
     $$</code></pre>
<p>Basically, just make sure that you have the <code>$$</code> on separate lines from the equations. This causes errors when compiling to the website (since it can’t tell that you want display mode and not a nest inline math mode).</p>
<section id="conventions" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="conventions"><span class="header-section-number">6.1</span> Conventions</h2>
<p>Our formatting is still evolving, but we try to stick to the following conventions</p>
<ul>
<li><span class="math inline">\(i\)</span> is reserved for observations <span class="math inline">\(i = 1,2,3...,N\)</span>, while <span class="math inline">\(t\)</span> is reserved for time <span class="math inline">\(t=1,2,...T\)</span></li>
<li><span class="math inline">\(k\)</span> is reserved for variable counters <span class="math inline">\(k=1,2,3...K\)</span>, while <span class="math inline">\(j\)</span> is another counter (e.g.&nbsp;panel, group, etc.)</li>
<li><span class="math inline">\(y\)</span> is a dependent/outcome variable, <span class="math inline">\(x\)</span> are explanatory variables, <span class="math inline">\(\\epsilon\)</span> is a population residual</li>
<li>We try to use Greek letters like <span class="math inline">\(\\alpha, \\beta\)</span> to represent (population) parameters
<ul>
<li>Estimates are hatted (<span class="math inline">\(\\hat{\\beta}\)</span>) versions of these parameters</li>
<li>We reserve <span class="math inline">\(\\beta\)</span> for coefficients, <span class="math inline">\(\\mu\)</span> for means, <span class="math inline">\(\\sigma\)</span> for standard deviations, and <span class="math inline">\(\\rho\)</span> correlations</li>
</ul></li>
<li>The variable <span class="math inline">\(D\)</span> is reserved for causal models, and <span class="math inline">\(Z\)</span> is for instruments</li>
<li>We try to use capital letters for random variables (e.g.&nbsp;<span class="math inline">\(X\)</span>) and lower-case for values (e.g.&nbsp;<span class="math inline">\(X = x\)</span>)</li>
<li>Operators like expectation, variance, and covariance are capitalized <span class="math inline">\(E,Var,Cov\)</span> and use square brackets (not parentheses). We sometimes subscript them with the variables being operated on (e.g.&nbsp;<span class="math inline">\(E_X\[X|Y=y\]\)</span>)
<ul>
<li>Good: <span class="math inline">\(E\[X\]^2\)</span></li>
<li>Bad: <span class="math inline">\(E(X)^2\)</span></li>
<li>Worse: <span class="math inline">\(EX^2\)</span></li>
</ul></li>
<li>Probability is denoted <span class="math inline">\(P\)</span> and is also subscripted when ambiguous
<ul>
<li>Try to use <span class="math inline">\(f\)</span> and <span class="math inline">\(F\)</span> as PDF and CDFs, respectively</li>
</ul></li>
<li>The normal distribution is <span class="math inline">\(N(\\mu,\\sigma)\)</span> and its PDF/CDF are <span class="math inline">\(\\phi,\\Phi\)</span> respectively. Other distributions are short abbreviations with paramaters.
<ul>
<li>e.g.&nbsp;<span class="math inline">\(Unif(a,b)\)</span></li>
</ul></li>
<li>We use blackboard-bold (e.g.&nbsp;<code>\\mathbb{R}</code>) for the classical fields (e.g.&nbsp;reals)</li>
<li>Matrices are always capital letters, and bolded when possible.</li>
<li>Vectors are always lower-case letters, and have a vector arrow (e.g.&nbsp;<span class="math inline">\(\\vec{a}\)</span>)</li>
</ul>
</section>
</section>
<section id="non-notebook-formatting" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Non-Notebook Formatting</h1>
<p>If you happen to be writing something that is not a notebook, you can use <a href="https://myst-parser.readthedocs.io/en/latest/">MyST Markdown</a> in addition.</p>
<ul>
<li>This gives you a bunch of special formatting options and compile-time inserts</li>
<li>It also is much more supportive of HTML than regular Notebooks</li>
</ul>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>